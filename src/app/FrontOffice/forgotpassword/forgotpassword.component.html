<div class="forgot-password-container">
  <div class="forgot-password-card">
    <div class="forgot-password-header">
      <img src="images/tt-logo.png" alt="Tunisie Telecom" class="logo" routerLink="/home">
      <h1>Mot de passe oubli√©</h1>
      <p>Entrez votre adresse email pour recevoir un lien de r√©initialisation</p>
    </div>

    <div *ngIf="!isSubmitted">
      <form [formGroup]="forgotPasswordForm" (ngSubmit)="onSubmit()" class="forgot-password-form">
        <div class="form-group">
          <label for="email">Adresse email</label>
          <div class="input-container">
            <input
              type="email"
              id="email"
              formControlName="email"
              placeholder="votre.email@example.com"
              [class.error]="forgotPasswordForm.get('email')?.invalid && forgotPasswordForm.get('email')?.touched"
            >
            <span class="input-icon">üìß</span>
          </div>
          <div class="error-message" *ngIf="forgotPasswordForm.get('email')?.invalid && forgotPasswordForm.get('email')?.touched">
            <span *ngIf="forgotPasswordForm.get('email')?.errors?.['required']">L'email est requis</span>
            <span *ngIf="forgotPasswordForm.get('email')?.errors?.['email']">Format d'email invalide</span>
          </div>
        </div>

        <button type="submit" class="reset-btn" [disabled]="forgotPasswordForm.invalid">
          Envoyer le lien de r√©initialisation
        </button>
      </form>
    </div>

    <div *ngIf="isSubmitted" class="success-message">
      <div class="success-icon">‚úÖ</div>
      <h2>Code de v√©rification envoy√© !</h2>
      <p>
        Un code de v√©rification a √©t√© envoy√© √† votre adresse email.
        Entrez le code ci-dessous pour continuer.
      </p>
      
      <form [formGroup]="verificationForm" (ngSubmit)="onVerifyCode()" class="verification-form">
        <div class="form-group">
          <label for="verificationCode">Code de v√©rification</label>
          <div class="input-container">
            <input
              type="text"
              id="verificationCode"
              formControlName="verificationCode"
              placeholder="Entrez le code re√ßu par email"
              maxlength="6"
              [class.error]="verificationForm.get('verificationCode')?.invalid && verificationForm.get('verificationCode')?.touched"
            >
            <span class="input-icon">üîê</span>
          </div>
          <div class="error-message" *ngIf="verificationForm.get('verificationCode')?.invalid && verificationForm.get('verificationCode')?.touched">
            <span *ngIf="verificationForm.get('verificationCode')?.errors?.['required']">Le code de v√©rification est requis</span>
            <span *ngIf="verificationForm.get('verificationCode')?.errors?.['pattern']">Le code doit contenir 6 chiffres</span>
          </div>
        </div>

        <div class="form-group">
          <label for="confirmEmail">Confirmer votre email</label>
          <div class="input-container">
            <input
              type="email"
              id="confirmEmail"
              formControlName="confirmEmail"
              placeholder="Confirmez votre adresse email"
              [class.error]="verificationForm.get('confirmEmail')?.invalid && verificationForm.get('confirmEmail')?.touched"
            >
            <span class="input-icon">üìß</span>
          </div>
          <div class="error-message" *ngIf="verificationForm.get('confirmEmail')?.invalid && verificationForm.get('confirmEmail')?.touched">
            <span *ngIf="verificationForm.get('confirmEmail')?.errors?.['required']">La confirmation de l'email est requise</span>
            <span *ngIf="verificationForm.get('confirmEmail')?.errors?.['email']">Format d'email invalide</span>
            <span *ngIf="verificationForm.get('confirmEmail')?.errors?.['emailMismatch']">L'email ne correspond pas √† celui saisi initialement</span>
          </div>
        </div>

        <button type="submit" class="verify-btn" [disabled]="verificationForm.invalid">
          V√©rifier le code
        </button>
      </form>
      
      <div class="resend-info">
        <p>Vous n'avez pas re√ßu le code ?</p>
        <button class="resend-btn" (click)="onSubmit()">
          Renvoyer le code
        </button>
      </div>
    </div>

    <div class="back-to-login">
      <button class="back-btn" routerLink="/login">
        ‚Üê Retour √† la connexion
      </button>
    </div>
  </div>
</div>
